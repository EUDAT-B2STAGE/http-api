e4bf3be5f208e97db64c7185b0e9680746242134 diff --git a/restapi/resources/checkauth.py b/restapi/resources/checkauth.py index 686bfda..76bbd5d 100644 --- a/restapi/resources/checkauth.py +++ b/restapi/resources/checkauth.py @@ -28,17 +28,17 @@ def after_this_request(f): print("TEST", g, f) return f -myoauth = oauth.remote_app( - 'myoauth', - consumer_key='', - consumer_secret='', - base_url='https://github.com/login/oauth', - request_token_params={'scope': 'user'}, - request_token_url=None, - access_token_method='POST', - access_token_url='https://github.com/login/oauth/access_token', - authorize_url='https://github.com/login/oauth/authorize' -) +# myoauth = oauth.remote_app( +# 'myoauth', +# consumer_key='', +# consumer_secret='', +# base_url='https://github.com/login/oauth', +# request_token_params={'scope': 'user'}, +# request_token_url=None, +# access_token_method='POST', +# access_token_url='https://github.com/login/oauth/access_token', +# authorize_url='https://github.com/login/oauth/authorize' +# ) b2access = oauth.remote_app( 'b2access', @@ -97,7 +97,7 @@ class Authorize(ExtendedApiResource): )}) token = resp.get('access_token') - print("TEST TOKEN") + logger.info("Received token: '%s'" % token) @after_this_request def set_cookie(response): @@ -106,7 +106,7 @@ class Authorize(ExtendedApiResource): # me = b2access.get('user') # return self.response(me.data) - return self.response(token) + return self.response({'token': token}) class Verify(ExtendedApiResource):
! [master] Fixing the regexp for irods errors. Adding some other code parsing. CHANGELOG.md LICENSE README.md __pycache__ b2access_client.py boot confs docker-compose.yml docs mkdocs.yml operations operations.py restapi run.py tasks test tests.sh [oauthtest] A working example of b2access authorization. Adding certificates on the http-api repo to make it work. -- CHANGELOG.md LICENSE README.md __pycache__ b2access_client.py boot confs docker-compose.yml docs mkdocs.yml operations operations.py restapi run.py tasks test tests.sh [oauthtest] A working example of b2access authorization. Adding certificates on the http-api repo to make it work. CHANGELOG.md LICENSE README.md __pycache__ b2access_client.py boot confs docker-compose.yml docs mkdocs.yml operations operations.py restapi run.py tasks test tests.sh [oauthtest^] Bug fix for base encoding in python3. CHANGELOG.md LICENSE README.md __pycache__ b2access_client.py boot confs docker-compose.yml docs mkdocs.yml operations operations.py restapi run.py tasks test tests.sh [oauthtest~2] Going forward the b2access protocol CHANGELOG.md LICENSE README.md __pycache__ b2access_client.py boot confs docker-compose.yml docs mkdocs.yml operations operations.py restapi run.py tasks test tests.sh [oauthtest~3] A working example of accessing a token with github api +* [master] Fixing the regexp for irods errors. Adding some other code parsing.
