
###############
backend:
    image: pdonorio/py3api
    hostname: restapi
    #command: sleep infinity
    command: ./run.py
    ports:
        - 8081:5000
    volumes:
        # Sql lite database
        - apilitedb:/dbs
        # Base code
        - ../rest-mock:/code
        # Rest API endpoints
        - ../vanilla/apis:/code/restapi/resources/custom
        # Rest API configuration
        - ../vanilla/specs/endpoints.ini:/code/confs/endpoints.ini

###############
frontend:
    image: pdonorio/flasking
    command: ./app.py
    #command: sleep infinity
    environment:
        #FLASK_CONFIGURATION: production
        FLASK_CONFIGURATION: development
    working_dir: /data/angulask
    volumes:
        # Main dir. It has to be the root directory, to make links work
        - ..:/data
        # js/css libraries installed via bower
        - ../vanilla/jslibs/bower_components:/data/angulask/angulask/static/bower
        # All the angular blueprints
        - ../vanilla/jscode:/data/angulask/angulask/static/app
        # Python pages ?
        - ../vanilla/pages:/data/angulask/angulask/pypages
        # # Python templates ?
        # # Angular HTML templates ?
        # # Python configurations ?
    ports:
        - 80:5000
    links:
        - backend:myapi

###############
# Make automatic to install
bower:
    image: pdonorio/jsdev
    working_dir: /tmp/vanilla/jslibs
    volumes:
        - ..:/tmp
