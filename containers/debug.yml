
#######################
# Link services inside API

backend:
  volumes:
      - ..:/code/custom
  environment:
    APP_MODE: debug
    DEBUG_LEVEL: VERBOSE
    VANILLA_PACKAGE: ${COMPOSE_PROJECT_NAME}

    # base the user/role mechanism on some database
    AUTH_ENABLE: 1
    # putting this here because it should not be configurable in .env
    AUTH_SERVICE: neo4j

    # # neo connection
    GRAPHDB_ENABLE: 1
    GRAPHDB_EXTERNAL: ${GRAPHDB_EXTERNAL}
    GRAPHDB_HOST: ${GRAPHDB_HOST}
    GRAPHDB_PORT: ${GRAPHDB_BOLT_PORT}
    GRAPHDB_PASSWORD: ${GRAPHDB_PASSWORD}

  ports:
    - 8081:5000

  links:
    - gdb:gdb

frontend:
  ports:
    - 80:5000
  environment:
    BACKEND_PORT: 8081

gdb:
  ports:
  - 9090:7474

swagger:
  ports:
    - 7777:80