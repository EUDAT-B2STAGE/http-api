
version: '3'

volumes:
  jwt_tokens:
    driver: local

services:
  coverage:
    command: coveralls
    hostname: coveraging
    build:
      context: ../submodules/build-templates/backend
      args:
        RAPYDO_VERSION: ${RAPYDO_VERSION}
    image: rapydo/backend:${RAPYDO_VERSION}
    working_dir: /repo
    environment:
      JWT_APP_SECRETS: ${JWT_APP_SECRETS}
    volumes:
      - jwt_tokens:${JWT_APP_SECRETS}
      - ../:/repo
      - ../projects/${COMPOSE_PROJECT_NAME}/backend:/code/${COMPOSE_PROJECT_NAME}
